% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/resilience_analysis.R
\name{resilience_analysis}
\alias{resilience_analysis}
\title{Complete Resilience Analysis Pipeline}
\usage{
resilience_analysis(
  data,
  risk_scores = c("frs", "ascvd", "mesa", "score2"),
  risk_region = "Low",
  percentile_thresholds = c(resilient = 20, reference_low = 40, reference_high = 60,
    susceptible = 80),
  min_scores = 1,
  include_plots = TRUE,
  ethnicity_mappings = NULL
)
}
\arguments{
\item{data}{Data frame with prepared clinical and CACS data (from prepare_cohort_data, missing CACS already removed)}

\item{risk_scores}{Character vector of risk scores to calculate (default: all available)}

\item{risk_region}{Risk region for SCORE2 (default: "Low")}

\item{percentile_thresholds}{Named vector of classification thresholds}

\item{min_scores}{Minimum number of risk scores required for ensemble (default: 1)}

\item{include_plots}{Logical, whether to generate diagnostic plots (default: TRUE)}

\item{ethnicity_mappings}{Optional data frame with custom ethnicity mappings for risk scores}
}
\value{
List containing all analysis results and optional plots
}
\description{
Performs a complete resilience analysis including risk score calculation,
ensemble scoring, zero-inflated modeling, percentile calculation, and
resilience classification.
}
\examples{
\dontrun{
# Step 1: Prepare cohort data
prepared_data <- prepare_cohort_data(
  raw_data,
  cholesterol_unit = "mmol/L",
  validate = TRUE
)

# Step 2: Run resilience analysis
results <- resilience_analysis(prepared_data)

# Access results
results$classifications$classification
results$model_summary
results$plots$cacs_vs_risk

# Custom analysis with ethnicity mappings
custom_mappings <- data.frame(
  original = c("1", "2", "3", "4", "5", "6", "7", "8", "9"),
  ascvd = c("white", "other", "other", "aa", "other", "other", "other", "other", "other"),
  mesa = c("white", "aa", "white", "aa", "chinese", "white", "white", "hispanic", "white"),
  stringsAsFactors = FALSE
)

prepared_data <- prepare_cohort_data(
  raw_data,
  ethnicity_col = "ethcat",
  id_col = "BioHEART_ID",
  cholesterol_unit = "mmol/L"
)

results <- resilience_analysis(
  prepared_data,
  risk_scores = c("frs", "ascvd", "mesa"),
  ethnicity_mappings = custom_mappings,
  percentile_thresholds = c(resilient = 15, reference_low = 35,
                          reference_high = 65, susceptible = 85),
  include_plots = FALSE
)
}
}
